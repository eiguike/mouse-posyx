<!DOCTYPE html>
<html>
  <head>
    <title>Mouse Posyx</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <link rel="stylesheet" href="./assets/mouseposyx.css">
    <script src="./assets/mouse.js"></script>
    <script src="./assets/keyboard.js"></script>
    <script src="./assets/mouse-posyx.js"></script>
  </head>

  <body oncontextmenu="return false;">
    <textarea class="keyboard-input" id="keyboard_input" autocomplete="off" rows="5" class="col s12"></textarea>
    <div class="col s12 touchpad" id="touchpad_div"></div>
    <div class="giroscope-button-bg">
      <button class="giroscope-button"></button>
    </div>
    <div class="row mouse-buttons">
      <div id="left_click" class="btn-large col s6 mouse-class">Left Click</div>
      <div id="right_click" class="btn-large col s6 mouse-class">Right Click</div>
    </div>
    <div id="input">
      <input type="text" id="ip_address">
      <input type="submit" onclick="initialize_socket()" value="Submit">
    </div>
  </body>

  <script>
var touchpad;

function proof_of_concept() {
  touchpad = document.querySelector('#touchpad_div');
  //var garden = document.querySelector('.garden');
  var maxX = 6;
  var maxY = 6;

  function handleOrientation(event) {
    var x = event.beta;  // In degree in the range [-180,180]
    var y = event.gamma; // In degree in the range [-90,90]

    // Because we don't want to have the device upside down
    // We constrain the x value to the range [-90,90]
    if (x >  90) { x =  90};
    if (x < -90) { x = -90};

    // To make computation easier we shift the range of 
    // x and y to [0,180]
    x += 90;
    y += 90;

    // 10 is half the size of the ball
    // It center the positioning point to the center of the ball
    x_mouse = (maxX*x/180 - 10);
    y_mouse = (maxY*y/180 - 10);

    MOUSE_SOCKET.socket.send("MOVE@"+x_mouse+"@"+y_mouse);
  }
  window.addEventListener('deviceorientation', handleOrientation);
}

  </script>
</html>
